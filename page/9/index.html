<!DOCTYPE html>





<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    search: {
      root: '/',
      path: ''
    },
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="Do one thing at a time, and do well.">
<meta property="og:type" content="website">
<meta property="og:title" content="Noob">
<meta property="og:url" content="http://jeffzzf.github.io/page/9/index.html">
<meta property="og:site_name" content="Noob">
<meta property="og:description" content="Do one thing at a time, and do well.">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Noob">
<meta name="twitter:description" content="Do one thing at a time, and do well.">
  <link rel="canonical" href="http://jeffzzf.github.io/page/9/">


<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Noob</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Noob</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
    <ul id="menu" class="menu">
        
        
        
          
          <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
    </ul>
    

</nav>

</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/08/18/Median-of-Two-Sorted-Arrays/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/08/18/Median-of-Two-Sorted-Arrays/" class="post-title-link" itemprop="url">Median of Two Sorted Arrays</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-08-18 10:09:53" itemprop="dateCreated datePublished" datetime="2015-08-18T10:09:53+08:00">2015-08-18</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/数组/" itemprop="url" rel="index"><span itemprop="name">数组</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Median-of-Two-Sorted-Arrays"><a href="#Median-of-Two-Sorted-Arrays" class="headerlink" title="Median of Two Sorted Arrays"></a>Median of Two Sorted Arrays</h1><p>There are two sorted arrays nums1 and nums2 of size m and n respectively. Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).<br><a href="https://leetcode.com/problems/median-of-two-sorted-arrays/" target="_blank" rel="noopener">https://leetcode.com/problems/median-of-two-sorted-arrays/</a></p>
<p>分析：<br>对于一个数x和连个排好序的数组a，b。如果x在a中是第ax个数，在b中是第bx个数。那么，x在a，b合并后的数组中是第（ax + bx - 1）个数。</p>
<p>充分利用两个数组已经排好序的特征，取a中前cntA = （k * lenA /（lenA + lenB））个元素（按数组中元素比例取元素，以避免边界情况），取b中cntB = k - 1 - cntA个元素。比较a[begA + cntA]和b[begB + cntB]：</p>
<ol>
<li>a[begA + cntA] == b[begB + cntB]，a[begA + cntA]即为a，b中第k个元素</li>
<li>a[begA + cntA] &lt; b[begB + cntB]，a[begA + cntA]，丢弃a[begA ~ begA + cntA]共cntA + 1个元素</li>
<li>a[begA + cntA] &gt; b[begB + cntB]，a[begA + cntA]，丢弃b[begB ~ begB + cntB]共cntB + 1个元素</li>
</ol>
<p>寻找两数组中第k大元素的函数如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findKth</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span>[] b, <span class="keyword">int</span> k, <span class="keyword">int</span> begA, <span class="keyword">int</span> endA, <span class="keyword">int</span> begB, <span class="keyword">int</span> endB)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lenA = endA - begA + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> lenB = endB - begB + <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(lenA == <span class="number">0</span>) <span class="keyword">return</span> b[begB + k];</span><br><span class="line">    <span class="keyword">if</span>(lenB == <span class="number">0</span>) <span class="keyword">return</span> a[begA + k];</span><br><span class="line">    <span class="keyword">if</span>(k == <span class="number">0</span>) <span class="keyword">return</span> Math.min(a[begA], b[begB]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> cntA = k * lenA / (lenA + lenB);</span><br><span class="line">    <span class="keyword">int</span> cntB = k - <span class="number">1</span> - cntA;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(a[begA + cntA] == b[begB + cntB]) <span class="keyword">return</span> a[begA + cntA];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a[begA + cntA] &lt; b[begB + cntB]) &#123;</span><br><span class="line">        k = k - cntA - <span class="number">1</span>;</span><br><span class="line">        begA = begA + cntA + <span class="number">1</span>;</span><br><span class="line">        endB = begB + cntB;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        k = k - cntB - <span class="number">1</span>;</span><br><span class="line">        begB = begB + cntB + <span class="number">1</span>;</span><br><span class="line">        endA = begA + cntA;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> findKth(a, b, k, begA, endA, begB, endB);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>寻找两数组中位数的主函数为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span>[] b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lenA = a.length, lenB = b.length;</span><br><span class="line">    <span class="keyword">if</span>((lenA + lenB) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>  (findKth(a, b, (lenA + lenB) / <span class="number">2</span>, <span class="number">0</span>, lenA - <span class="number">1</span>, <span class="number">0</span>, lenB -<span class="number">1</span>) + </span><br><span class="line">        findKth(a, b, (lenA + lenB) / <span class="number">2</span> - <span class="number">1</span>, <span class="number">0</span>, lenA - <span class="number">1</span>, <span class="number">0</span>, lenB - <span class="number">1</span>)) * <span class="number">0.5</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">double</span>)findKth(a, b, (lenA + lenB) / <span class="number">2</span>, <span class="number">0</span>, lenA - <span class="number">1</span>, <span class="number">0</span>, lenB - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/31/MySQL中的索引/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/31/MySQL中的索引/" class="post-title-link" itemprop="url">MySQL中的索引</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-31 08:39:21" itemprop="dateCreated datePublished" datetime="2015-07-31T08:39:21+08:00">2015-07-31</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-09-20 16:54:24" itemprop="dateModified" datetime="2019-09-20T16:54:24+08:00">2019-09-20</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <blockquote>
<p>MySQl中，索引在存储引擎层实现而不是服务器层，</p>
</blockquote>
<h2 id="B-Tree索引"><a href="#B-Tree索引" class="headerlink" title="B-Tree索引"></a>B-Tree索引</h2><p>B-Tree（参考<a href="http://jeffzzf.github.io/2015/07/29/B-Tree-B-Tree/">B-Tree，B+Tree</a>）对索引列是按顺序组织存储的，所以很适合查找范围数据、全键值或键前缀查找。<strong>索引对多个值进行排序的依据是CREATETABLE语句中定义索引的顺序</strong>。B-Tree索引有以下限制：</p>
<ol>
<li>如果不是按照索引的最左列开始查找，则无法使用索引</li>
<li>不能跳过索引中的列</li>
<li>如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查询。</li>
</ol>
<h2 id="哈希索引"><a href="#哈希索引" class="headerlink" title="哈希索引"></a>哈希索引</h2><p>哈希索引（Hash Index）基于哈希表实现，只有精确匹配所有列的查询才有效。哈希索引的结构非常紧凑，也使得哈希索引的速度非常快。但是，哈希索引也有它的限制：</p>
<ol>
<li>哈希索引只包含哈希值和行指针，不存储字段值。所以，不能使用索引中的值来避免读取行。</li>
<li>哈希索引不是按照索引值顺序存储的，无法用于排序</li>
<li>哈希索引也不支持部分索引列匹配查找</li>
<li>哈希索引只支持等值比较查询</li>
<li>当出现冲突时，需要遍历桶中的所有行指针，性能会有所下降</li>
</ol>
<h2 id="索引策略"><a href="#索引策略" class="headerlink" title="索引策略"></a>索引策略</h2><h2 id="独立的列"><a href="#独立的列" class="headerlink" title="独立的列"></a>独立的列</h2><p>如果查询中的列不是独立的，MySql就不会使用索引，独立的列是指索引列不能使表达式的一部分。例如，<code>SELECT id FROM user WHERE id + 1 = 5</code>就无法使用id上的索引。</p>
<h2 id="前缀索引与索引选择性"><a href="#前缀索引与索引选择性" class="headerlink" title="前缀索引与索引选择性"></a>前缀索引与索引选择性</h2><p>索引很长的字符串列，会让索引大且慢。可以通过插入一个hash列模拟哈希索引，或者可以只索引开始的部分字符，这样可以大大节约索引空间，提高索引效率。但这样会降低索引选择性，<strong>索引选择性</strong>是指不重复的索引值（也称为基数，cardinality）和数据表中的记录总数的比值。索引的选择性越高则查询效率越高。前缀索引可以使索引更小更快，但是MySQl无法使用前缀索引做ORDER BY和GROUP BY，也无法使用前缀索引做覆盖扫描。</p>
<h2 id="多列索引"><a href="#多列索引" class="headerlink" title="多列索引"></a>多列索引</h2><p>在多个列上建立独立的单独索引大部分情况下并不能提高MySQL的查询性能。在5.0之前的版本，MySQL只能使用其中某一个单列索引，在5.0以后的版本中，查询能够同时使用多个单列索引扫描并将结果合并。有三种合并：OR条件联合（Union）、AND条件相交（Intersection）以及联合与相交的组合。索引合并有时候是一种优化，但更多时候说明了索引建的很糟糕：</p>
<ol>
<li>当服务器对多个索引做相交操作时（多个And条件），通常说明需要一个包含所有相关列的多列索引，而不是多个独立的单独索引。</li>
<li>当服务器需要对多个索引做联合操作时（通常有多个OR条件），通常需要耗费大量的CPU、内存资源。</li>
</ol>
<p>可以通过optimizer_switch关闭索引合并功能，也可以使用IGNORE_INDEX提示让优化器忽略某些索引。</p>
<h2 id="索引顺序"><a href="#索引顺序" class="headerlink" title="索引顺序"></a>索引顺序</h2><p><strong>经验法则</strong>：将选择性最高的列放到索引最前面。该法则在一定条件下适用，但是需要综合考虑，最重要的是要尽量避免<strong>随机IO</strong>和<strong>排序</strong>。查询性能也和查询条件的值分布有关，可以根据那些运行频率最高的查询来调整索引列的顺序。</p>
<h2 id="聚簇索引"><a href="#聚簇索引" class="headerlink" title="聚簇索引"></a>聚簇索引</h2><p>聚簇索引是一种数据存储方式，InnoDB的聚簇索引实际上是在同一个数据结构中保存了B-Tree索引和数据行。叶子页中包含了行的全部数据，节点页中只包含索引项。</p>
<p>InnoDB通过主键聚集数据，如果没有定义主键，InnoDB会选择一个唯一的非空索引代替，如果没有这样的非空索引，InnoDB会隐式定义一个主键来作为聚簇索引。InnoDB只聚集在同一个页面的记录，包含相邻键值的页面可能会相距甚远。聚集数据的优点：</p>
<ol>
<li>相关数据保存在一起，减少随机IO次数</li>
<li>聚簇索引将索引和数据保存在同一个B树中，从聚簇索引中获取数据通常比在非聚簇索引中查找更快。</li>
</ol>
<p>聚簇索引的缺点：</p>
<ol>
<li>更新聚簇索引列的代价很高，因为会强制InnoDB将每个被更新的行移动到新的位置</li>
<li>在基于聚簇索引的表中插入新行，或者更新索引列时可能导致<strong>页分裂（page split）</strong>问题。当行的主键值要求必须将这一行插入到某个已满的页中时，存储引擎会将该页分裂成两个页面来容纳改行，页分裂会导致表占用更多的磁盘空间。</li>
<li>聚簇索引可能导致全表扫描变慢，尤其是行比较稀疏，或者由于页分裂导致存储不连续时。</li>
<li>通过二级索引（叶节点中存储主键值而非聚簇索引叶节点中的数据行）查找行时，存储引擎先找到二级索引的叶节点获得对应的主键值，然后根据这个值去聚簇索引中查找对应的行，需要两次B树查找。</li>
</ol>
<h2 id="MyISAM-与InnoDB的数据分布"><a href="#MyISAM-与InnoDB的数据分布" class="headerlink" title="MyISAM 与InnoDB的数据分布"></a>MyISAM 与InnoDB的数据分布</h2><p>MyISAM中的主键索引与其他列索引并没有什么不同，都是基于B+树，非叶节点中存储键值，页节点中存储指向数据行的指针。</p>
<p>InnoDB中的索引也采用B+树组织，不过叶节点中存储的是整个数据行以及事务ID、用于事务和MVCC的回滚指针。InnoDB的二级索引的叶节点中存储的不是行指针，而是主键值，并以此作为指向行的指针从聚簇索引中查找完整数据。这种策略减少了当出现行移动或者数据页分裂时二级索引的维护工作。</p>
<h2 id="覆盖索引"><a href="#覆盖索引" class="headerlink" title="覆盖索引"></a>覆盖索引</h2><p>如果一个索引包含所有需要查询字段的值，该索引就成为覆盖索引。在索引中满足查询的成本一般比查询行要小得多。覆盖索引必须覆盖索引列的值，MySQL只能使用B树索引做覆盖索引。</p>
<p>MySQL查询优化器在执行查询前会判断是否有一个索引能够进行覆盖，索引无法覆盖查询的情况有两种：</p>
<ol>
<li>没有任何索引能够覆盖这个查询，这种情况下，如果WHERE条件中的列有索引可以覆盖，MySQL可以过滤之后再读取需要的数据行。</li>
<li>MySQL不能在索引中执行某些LIKE操作   ，MySQL能够执行最左前缀匹配的LIKE查询，但是如果是通配符开头的LIKE查询，存储引擎就无法做比较。</li>
</ol>
<h2 id="压缩索引"><a href="#压缩索引" class="headerlink" title="压缩索引"></a>压缩索引</h2><p>MyISAM使用前缀压缩来减少索引大小，先完全保存索引块中的第一个值，然后将其他值和第一个值进行比较得到相同前缀的字节树和剩余的不同后缀部分。例如第一个值“perform”则第二个值“performance”，压缩后第二个值的实际存储值是“7，ance”。随机压缩可以让更多的索引放入内存，对于IO密集型操作，性能更高。由于大量的值依赖于前面的值，随机查找性能降低，CPU密集型应用性能降低。</p>
<h2 id="索引优化"><a href="#索引优化" class="headerlink" title="索引优化"></a>索引优化</h2><ol>
<li>当多次出现对多个索引做相交操作（有多个AND条件），通常意味着需要一个包含所有相关列的多列索引，而不是多个独立的单列索引。</li>
<li>设计索引顺序时要尽量避免随机IO，当不需要考虑排序和分组时，将选择性最高的列放在前面通常是很好的。</li>
<li>索引本身有一定的开销，不是越多越好。例如性别只有两个值，在性别字段建索引对查询速度的提升不高，但是更新时会降低性能。</li>
<li>复合索引中，只要有一列含有NULL，那么这一列对复合索引无效。在设计数据库时，尽量避免让字段的默认值为NULL。</li>
<li>使用前缀索引，例如一个CHAR（255）的列，如果前10或20个字段内多数值是唯一的，那么就不需要对整列进行索引。</li>
<li>在列上进行运算（参与运算或者作为函数参数）将导致索引失效，应尽量避免。</li>
</ol>
<p>参考资料<br> 《高性能MySQL（第三版）》</p>

          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/29/B-Tree-B-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/29/B-Tree-B-Tree/" class="post-title-link" itemprop="url">B-Tree, B+Tree</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-29 21:30:49" itemprop="dateCreated datePublished" datetime="2015-07-29T21:30:49+08:00">2015-07-29</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/B-Tree/" itemprop="url" rel="index"><span itemprop="name">B-Tree</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h1><p>B-Tree即B树，是一种为磁盘等存储设备而设计的多路平衡查找树，很多数据库系统都使用了B树或者B树的各种变种来存取信息（InnoDB使用了B+树）。<br><strong>m阶B树的定义</strong></p>
<ol>
<li>树中每个节点最多含有m（m &gt;= 2）个孩子</li>
<li>除根节点和叶节点外，每个节点最少有ceil（m/2）个孩子</li>
<li>若根节点不是叶节点，那么根节点最少有2个孩子</li>
<li>所有叶节点位于同一层，叶节点中不包含任何信息，可以当做外部节点或者查询失败的节点</li>
<li>每个非叶节点的节点包含n个关键字信息：n，p0，k1，p1，k2……p（n-1），k（n-1），pn，kn。其中，k（1…n）表示关键字，同一个节点中的关键字按递增次序排列，p(0…n)表示指向子树的指针，pi指向的子树中的所有关键字的值都大于p（i-1）并且小于p（i）。</li>
</ol>
<h1 id="B-树"><a href="#B-树" class="headerlink" title="B+树"></a>B+树</h1><p> B+树是应文件系统所需而产生的一种B-树的变形树。一棵m阶的B+树和m阶的B树的差异在于：</p>
<ol>
<li>有n 棵子树的结点中含有n 个关键码；</li>
<li>所有的叶子结点中包含了全部关键码的信息，及指向含有这些关键码记录的指针，且叶子结点本身依关键码的大小自小而大的顺序链接。</li>
<li>所有的非终端结点可以看成是索引部分，结点中仅含有其子树根结点中最大关键码。</li>
</ol>
<p>通常在B+树上有两个头指针，一个指向根节点，另一个指向关键字最小的叶子节点。因此可以对B+树进行两种查找运算：一种是从最小关键字起顺序查找，另一种是从根节点开始查找。 </p>
<p>在B+树上进行随机查找、插入和删除的过程基本上与B-树类似。只是在查找时，若非终端结点上的关键码等于给定值，并不终止，而是继续向下直到叶子结点。因此，在B+树，不管查找成功与否，每次查找都是走了一条从根到叶子结点的路径。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/v_JULY_v/article/details/6530142" target="_blank" rel="noopener">B树，B+树，B*树</a><br><a href="http://blog.csdn.net/hguisu/article/details/7786014" target="_blank" rel="noopener">B树、B+树的应用</a></p>

          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/29/MySQL高级特性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/29/MySQL高级特性/" class="post-title-link" itemprop="url">MySQL高级特性</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-29 15:37:30" itemprop="dateCreated datePublished" datetime="2015-07-29T15:37:30+08:00">2015-07-29</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h1><p>MySQL分区表的底层由多个物理子表组成，每个分区表都有一个使用#分隔命名的表文件。分区表对SQL层是透明的，，对分区表的请求会通过分区表的句柄（Handler Object）转化成对存储引擎接口的调用。每个分区表有自己的独立索引，整个表没有全局索引。查询时，优化器根据分区定义过滤不包含查询数据的分区。分区表是一种粗粒度的索引策略，单表最多1024个分区（最好不超过150），分区表无法使用外键约束。</p>
<p>分区表适用于以下场景：</p>
<ol>
<li>在没有合适索引时，对其中几个分区进行全表扫描</li>
<li>表太大，无法放入内存</li>
<li>部分分区是热点域（例如按时间分区时，只有最近的记录是热点域）</li>
<li>需要对分区表进行独立操作（清除、检查、优化、备份、恢复或者使用不同的物理设备）</li>
<li>使用分区表规避特殊限制（如InnoDB的单个索引互斥访问，ext3文件系统的inode锁竞争等）</li>
</ol>
<p>分区表使用方法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> sales &#123;</span><br><span class="line">    order_date DATATIME <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    ...</span><br><span class="line">&#125;<span class="keyword">ENGINE</span>=InnoDN <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(<span class="keyword">YEAR</span>(order_date)) &#123;</span><br><span class="line">    <span class="keyword">PARTITION</span> p2012 <span class="keyword">VALUES</span> <span class="keyword">LESS</span> <span class="keyword">THEN</span>(<span class="number">2012</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p2013 <span class="keyword">VALUES</span> <span class="keyword">LESS</span> <span class="keyword">THEN</span>(<span class="number">2013</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><p>视图是一种虚拟的数据表，它的行为和数据表一样，但是并不真正包含数据，<strong>但是不能对视图创建索引和触发器</strong>。实现视图的两种方法：</p>
<ol>
<li>将SELECT语句的结果放到临时表中，即临时表算法（TEMPTABE），使用这种算法会有明显的性能问题。</li>
<li>重写使用视图的查询语句，将视图定义SQL合并到查询SQL中，即合并算法（MERGE）。</li>
</ol>
<p>如果视图中包含GROUP BY，DISTINCT，聚合函数，UNION，子查询等，原表记录和视图记录中无法建立一一映射，MySQL将使用临时表算法来实现视图。可以通过视图来更新视图相关数据表的视图成为<strong>可更新视图</strong>，更新视图查询也可以是关联语句，但是被更新的列必须来自同一个表，<strong>所有使用临时表算法的视图都无法被更新</strong>。</p>
<p>MySQL不支持物化视图（将视图结果数据存放在一个可以查看的表中，并定期从原始数据表中刷新数据到这个表中）。</p>
<h1 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h1><p>InnoDB是MySQL唯一支持外键的内存存储引擎，外键通常要求每次修改数据时在另外一个表中多执行一次检查操作。如果向子表中写入一条记录，需要对父表中对应记录进行加锁操作，以确保这条记录在事务完成之前没有被删除。这回导致额外的锁等待，甚至导致一些死锁。如果要维护两表之间数据的一致性，使用外键比在应用程序中检查一致性性能要高得多。</p>
<h1 id="MySQL内部存储代码"><a href="#MySQL内部存储代码" class="headerlink" title="MySQL内部存储代码"></a>MySQL内部存储代码</h1><p>有四种在MySQL内部存储代码的方法：存储过程、存储函数、触发器和事件。存储过程和存储函数都可以接受参数然后返回值，触发器和事件都不可以。使用内部存储代码优点如下：</p>
<ol>
<li>在服务器内部执行，离数据最近，可以节省数据传输带宽和延迟</li>
<li>这是一种代码复用，保证某些行为保持一致，提供一定的安全性</li>
<li>可以简化代码的维护和版本更新</li>
</ol>
<h1 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h1><p>触发器是指在执行INSERT、UPDATE或者DELETE时，执行一些特定的操作。可以指定触发器在SQL执行前触发还是执行后触发。触发器本身没有返回值，不过它们可以读取或改变触发SQL语句所影响的数据。可以使用触发器实现一些强制限制，或者某些业务逻辑。</p>
<p>对于每个表上的每一个时间，最多只能定义一个触发器（不能在AFTER INSERT上定义两个触发器）。MySQL只支持<strong>基于行的触发</strong>，触发器始终是针对一条记录的，而不是针对整个SQL语句的。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> <span class="keyword">trigger</span></span><br><span class="line"><span class="keyword">BEFORE</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">FOR</span>  <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line">    DECLEAR rowCnt <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">ROW_COUNT</span>();</span><br><span class="line">    IF rowCnt &lt;&gt; 1 THEN</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>使用触发器可以减少客户端和服务器之间的通信，可以简化应用逻辑还可以提高性能。在InnoDB上的触发器是在同一个事务中完成的，它们执行的操作是原子性的。</p>
<h1 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h1><p>事件可以指定MySQL在某个时间执行一段SQL代码，或者每隔一段时间执行一段SQL代码。通常可以把复杂的SQL封装到一个存储过程中，事件在执行时，只需要一个简单的Call调用。</p>
<p>事件在一个独立的线程中被初始化，它与处理连接的线程没有任何关系，也不接受任何参数，没有任何返回值。事件的典型应用包括定期地维护任务、重建缓存、构建汇总表来模拟物化视图或者用于监控和诊断数据库状态等。</p>
<h1 id="绑定变量（prepared-statement）"><a href="#绑定变量（prepared-statement）" class="headerlink" title="绑定变量（prepared statement）"></a>绑定变量（prepared statement）</h1><p>当创建一个绑定变量SQL时，客户端向服务器发送一个SQL语句原型，服务器端收到这个SQL语句框架后，解析并存储这个SQL语句的部分执行计划，返回给客户端一个SQL语句处理句柄。以后每次执行这类查询，客户端都指定使用这个句柄。</p>
<p>绑定变量的SQL使用问号标记可以接受参数的位置，当真正需要执行具体查询时，使用具体值代替这些问号。客户端通过向服务器发送各个问号的取值和这个SQL句柄来执行一个具体的查询。MySQL在使用绑定变量的时候可以更加高效地执行执行大量的重复语句。</p>
<ol>
<li>在服务器端只需要解析一次SQL语句</li>
<li>在服务器端某些优化器的工作只需要执行一次，因为它会缓存一部分的执行计划</li>
<li>以二进制的方式只发送参数和句柄比起每次发送ASCII码文本效率更高，绑定变量的形式可以分块传输。</li>
<li>使用绑定变量网络开销更小而且可以节省将数据从存储原始格式转换成文本格式的开销。</li>
</ol>
<h1 id="字符集和校对规则"><a href="#字符集和校对规则" class="headerlink" title="字符集和校对规则"></a>字符集和校对规则</h1><p>MySQL的字符集和校对规则可以分为两类：创建对象时的默认值、在服务器和客户端通信时的设定值。</p>
<p>创建数据库时，将根据服务器上的character_set_server设置来设定该数据库的默认字符集。创建表和列时也可以针对表和列设置特定的字符集。实际采用的字符集按照数据库-&gt;表-&gt;列的顺序，如果没有为表指定字符集，则采用它所属数据库的字符集，如果没有为列设置字符集，则采用表设置的字符集。</p>
<p>服务器端总是假设客户端按照character_set_client设置的字符集来传输数据和SQL语句。当服务器收到客户端的SQL语句时，先转换成字符集character_set_connection。</p>
<p>从服务器取数据时将数据从character_set_server转换成character_set_connection，再从character_set_connection转换成character_set_result。</p>
<p>选择字符集和校对规则的正确方法是：先为服务器或数据库选择一个合理的字符集。然后根据特殊情况为特定表或列指定字符集和校对规则。_cs, _ci和_bin分别表示按照大小写敏感、大小写不敏感或者直接比较字节的方式比较字符串。</p>
<p>为了保证缓存中有足够的空间存储字符串，MySQL使用一个定长的空间来存储字符串。例如，utf-8的char(10)需要30个字节，索引一个utf-8字符集的列时，每个字符都是三个字节，最大索引前缀的限制缩短为1/3。变长字段类型（varchar text）存储时不会采用这种方法，但是当它们存储在临时表中用来处理或排序时，也会分配最大可能长度。</p>
<h1 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h1><p>MySQL查询缓存保存查询返回的完整结果，当查询命中该缓存，MySQL会立刻返回结果，跳过了解析、优化和执行阶段。查询缓存系统会跟踪查询涉及的每个表，如果这些表发生变化，那么和这个表相关的所有缓存数据都将失效。</p>
<p>缓存存放在一个引用表中，通过一个哈希值引用，这个哈希值包括了查询本身、当前要查询的数据库、客户端协议的版本等可能会影响返回结果的信息。</p>
<p>当查询语句中有一些不确定的数据时，则不会被缓存。例如包含NOW(),CURRENT(),DATE()的查询不会被缓存。如果查询中包含任何用户自定义函数、存储函数、用户变量、临时表或者包含列级别权限的表都不会被缓存。查询缓存存在的问题：</p>
<ol>
<li>打开查询缓存对读和写操作都会带来额外的消耗，读查询在开始之前必须先检查是否命中缓存</li>
<li>如果读查询可以被缓存，执行完成后，如果检查到缓存中没有这个结果，则会存入查询缓存</li>
<li>当向某个表写入数据时，必须将所有缓存都设置失效，如果查询缓存非常大或者碎片很多，该操作可能带来很大的开销</li>
<li>查询缓存操作是一个加锁排他操作，锁的开销也会相当可观。如果查询缓存使用了大量的内存，对全局锁的竞争可能导致整个系统僵死。</li>
</ol>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>《高性能MySQL（第三版）》</p>

          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/23/MySql总结-概述/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/23/MySql总结-概述/" class="post-title-link" itemprop="url">MySQL总结-概述</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-23 15:03:08" itemprop="dateCreated datePublished" datetime="2015-07-23T15:03:08+08:00">2015-07-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-10-14 15:05:02" itemprop="dateModified" datetime="2019-10-14T15:05:02+08:00">2019-10-14</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h2 id="Mysql服务器逻辑架构"><a href="#Mysql服务器逻辑架构" class="headerlink" title="Mysql服务器逻辑架构"></a>Mysql服务器逻辑架构</h2><p>最上层：连接/线程处理，提供连接处理、授权认证、安全等服务（与其他客户端/服务器C/S架构类似）</p>
<p>第二层：包含了MySql大多数的核心服务功能，包括查询解析、分析、优化、缓存以及所有内置函数（日期、时间、数学、加密……），所有跨存储引擎的功能都在这一层实现：存储过程、触发器、视图等。</p>
<p>最下层：存储引擎，存储引擎负责Mysql中数据的存储和提取，上层通过存储引擎API与存储引擎通信，这些API屏蔽了不同存储引擎之间的差异，执行诸如“开始一个事务”或者“根据主键提取一行记录”等操作。除了InnoDB外，存储引擎不会解析SQL（InnoDB会解析外键定义，因为MySql服务器本身没有实现这一功能），不同存储引擎之间不会相互通信。</p>
<h3 id="连接管理与安全性"><a href="#连接管理与安全性" class="headerlink" title="连接管理与安全性"></a>连接管理与安全性</h3><p>每个客户端连接都会在服务器进程中拥有一个线程，这个连接查询只会在这个单独的线程中执行，该线程只能轮流在某个CPU核中执行。</p>
<h3 id="并发读写"><a href="#并发读写" class="headerlink" title="并发读写"></a>并发读写</h3><p>在处理并发读写时，可以通过共享锁（Shared Lock，也叫读锁read lock）和排它锁（Exclusive Lock，也叫写锁write lock）来控制。</p>
<p>读锁是共享的，读锁之间互不阻塞，多个客户端可以在同一个时刻读取同一个资源而互不干扰；写锁是排它的，写锁会阻塞其它写锁或读锁。这样可以保证在某个时刻只有一个用户能执行写入。<strong>锁策略</strong>就是在锁的开销和数据安全性之间寻求平衡，大多数商业数据库都是在表上施加行级锁（row-level lock），并以多种方式实现，以便在锁比较多的情况下提供尽可能好的性能。MySql则提供了更多的选择，MySql存储引擎可以实现自己的锁策略和锁粒度。</p>
<p><strong>表锁（table lock）</strong>是MySql中最基本的锁，也是开销最小的锁，它会锁定整个表。写操作（插入、删除、更新）时必须先获取写锁，这会阻塞其它用户对该表的所有读写操作。写锁比读锁有更高的优先级，写锁请求可能会被插入到读锁队列前面。除了存储引擎可以管理自己的锁外，MySql本身也会使用表锁来实现不同的目的，例如Alter Table时MySql会使用表锁。<strong>行锁(row lock)</strong>可以最大程度地支持并发处理，同时也带来了最大的锁开销（InnoDB和XtraDb）中实现了行锁，行锁只在存储引擎中实现，MySql服务器中没有实现。</p>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>事务就是一组原子性的SQL查询，或者说一个独立的工作单元。如果MySql能够成功执行该组查询的全部语句就执行该组查询。如果其中有任何一条语句因为崩溃或其它原因无法执行，那么所有语句都不会执行。也就是说，事务内部的语句要么全部执行成功，要么全部执行失败。</p>
<h2 id="事务的ACID属性"><a href="#事务的ACID属性" class="headerlink" title="事务的ACID属性"></a>事务的ACID属性</h2><ul>
<li>原子性（atomicity），一个事务必须被视为不可分割的最小工作单元，整个事务中的所有操作要么全部提交成功，要么全部失败回滚，对于一个事务来说，不可能执行其中的一部分操作。</li>
<li>一致性（consistency），系统总是从一个一致性的状态转换到另一个一致性的状态，例如转账时转入的数目必须与转出的数目相等。</li>
<li>隔离性（isolation），一个事务所做的修改在最终提交前对其他事务是不可见的。</li>
<li>持久性（durability），一旦事务提交，事务所做的修改就会永久保存到数据库中。</li>
</ul>
<p>实现ACID需要更多的系统开销，可以根据业务是否需要事务处理来选择合适的存储引擎，对于一个不需要事务的查询类应用，选择一个非事务型的存储引擎可以获得更高的性能。即使存储引擎不支持事务，也可以通过LOCK TABLES为应用提供一定程度的保护。</p>
<h2 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h2><ol>
<li>READ UNCOMMITTED（未提交读），事务中的修改，即使没有提交，对其它事务也都是可见的。读取未提交的数据被称为<strong>脏读（dirty read）</strong>，该级别的性能并不会比其它级别高，实际应用中很少使用。</li>
<li>READ COMMITTED（提交读），一个事务从开始直到提交前，所做的任何修改对其它事务都是不可见的。该级别也叫不可重复读（nonrepeatable read）。因为在并发修改的情况下，执行两次（写操作提交前后）同样的读操作，可能得到不一致的结果。（<em>大多数数据库系统的默认隔离级别</em>）</li>
<li>REPEATABLE READ（可重复读），该级别解决了脏读和不可重复读的问题，但是不能解决<strong>幻读（Phantom READ）</strong>问题，即某个事务在读取某个范围内的记录时，另外一个事务又在该范围内插入新的记录（幻行Phantom），不可重复读问题可以通过加锁解决，但是幻读问题不能通过加锁解决，因为无法对新插入的记录加锁。InnoDB和XtraDBM通过多版本并发控制（MVCC，Multiversion Concurrency Control）解决了幻读问题。（<em>MySql的默认隔离级别</em>）</li>
<li>SERIALIZABLE（可串行化），Seriablizable是最高的隔离级别，它通过强制事务串行执行，避免了脏读、不可重复读和幻读问题。Serializable会在读取的每一行数据都加锁，可能导致大量的超时和锁争用问题，实际很少采用。</li>
</ol>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><p>死锁是指2个或者多个事务占有已申请的资源并并相互申请持有对方资源的情况，当多个事务试图以不同的顺序锁定资源时，就可能产生死锁。InnoDB解决死锁问题的方法是：将持有最少行级排它锁的事务进行回滚，然后重新执行。</p>
<h2 id="事务日志"><a href="#事务日志" class="headerlink" title="事务日志"></a>事务日志</h2><p>使用事务日志，存储引擎在修改表的数据时只需要修改其内存的拷贝，再把修改行为记录持久到硬盘上的事务日志中，而不用每次都将修改的数据本身持久到磁盘。事务日志采用追加的方式，写日志的操作是在磁盘上的小块顺序区域内，所以采用事务日志会快得多。事务日志持久后，内存中被修改的数据在后台可以慢慢刷回到磁盘。目前大多数存储引擎都是这样实现的（<strong>预写式日志</strong>，Write-Ahead Logging），修改数据需要写磁盘两次。</p>
<p>如果数据的修改已经记录到事务日志并持久化，但数据本身还没有写回磁盘，系统发生崩溃，存储引擎在重启时就能够自动恢复这部分修改的数据。</p>
<h2 id="自动提交"><a href="#自动提交" class="headerlink" title="自动提交"></a>自动提交</h2><p>Mysql默认采用自动提交（AUTOCOMMIT）模式，也就是说，如果不显式地开始一个事务，则每次查询都被当做一个事务执行提交操作。还有一些命令在执行之前会强制执行COMMIT提交当前的活动事务。例如数据定义语言（DDL）中的ALTER TABLE。</p>
<h2 id="多版本并发控制MVCC"><a href="#多版本并发控制MVCC" class="headerlink" title="多版本并发控制MVCC"></a>多版本并发控制MVCC</h2><p>MVCC是行级锁的一个变种，但在很多情况下避免了加锁操作，开销更低。MVCC可以提供基于某个时间点的快照,使得对于事务看来,总是可以提供与事务开始时刻相一致的数据,而不管这个事务执行的时间有多长.所以在不同的事务看来,同一时刻看到的相同行的数据可能是不一样的。<br>为了实现mvcc, innodb对每一行都加上了两个隐含的列,其中一列存储行的创建时间,另外一列存储行的过期时间. 但是innodb存储的并不是绝对的时间,而是与时间对应的数据库系统的版本号,每当一个事务开始的时候,innodb都会给这个事务分配一个递增的版本号,所以版本号也可以被认为是事务号.对于每一个”查询”语句,innodb都会把这个查询语句的版本号同这个查询语句遇到的行的版本号进行对比,然后结合不同的事务隔离等级,来决定是否返回该行。</p>
<ol>
<li>SELECT<br> 对于select语句，只有同时满足了下面两个条件的行，才能被返回:<ul>
<li>行的被修改版本号小于或者等于该事务号</li>
<li>行的被删除版本号要么没有被定义,要么大于事务的版本号:行的删除版本号如果没有被定义,说明该行没有被删除过;如果删除版本号大于当前事务的事务号,说明该行是被该事务后面启动的事务删除的,由于是repeatable read隔离等级,后开始的事务对数据的影响不应该被先开始的事务看见,所以该行应该被返回.</li>
</ul>
</li>
<li>INSERT<br>　　对新插入的行,行的更新版本被修改为该事务的事务号</li>
<li>DELETE<br>　　对于删除,innodb直接把该行的被删除版本号设置为当前的事务号,相当于标记为删除,而不是实际删除</li>
<li>UPDATE<br>　　在更新行的时候,innodb会把原来的行复制一份到回滚段中,并把当前的事务号作为原来行的删除版本号</li>
</ol>
<h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><p>InnoDB(in-no-db)采用采用MVCC来支持高并发，并且实现四个标准的隔离级别，默认隔离级别为REPEATABLE READ（可重复读），并且通过间隙锁（next-key locking）策略防止幻读，间隙锁使得InnoDB不仅仅锁定涉及的行，还会对索引中的间隙进行锁定，以防止幻影行的插入。</p>
<p>InnoDB表基于聚簇索引建立，对主键查询有很高的性能，不过它的二级索引（secondary index非主键索引）中必须包含主键列。如果表的索引很多的话，主键应当尽可能的小。</p>
<h3 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h3><p>MyISAM（my-z[ei]-m）不支持事务和行级锁，而且崩溃后无法安全恢复。MyISAM设计简单，在写少读多的情况下，速度很快。默认情况下应该选择InnoDB，只要在需要快速读取并且不需要事务支持和崩溃恢复的情况下才考虑使用MyISAM。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li>《高性能MySql》</li>
<li><a href="http://blog.csdn.net/chosen0ne/article/details/10036775" target="_blank" rel="noopener">理解事务——原子性、一致性、隔离性和持久性</a></li>
<li><a href="http://www.searchdatabase.com.cn/showcontent_53018.htm" target="_blank" rel="noopener">InnoDB多版本并发控制原理概述
</a></li>
</ol>

          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/17/分词算法总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/17/分词算法总结/" class="post-title-link" itemprop="url">分词算法总结</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-17 21:45:40" itemprop="dateCreated datePublished" datetime="2015-07-17T21:45:40+08:00">2015-07-17</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            
          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/17/Simhash算法实现去重/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/17/Simhash算法实现去重/" class="post-title-link" itemprop="url">Simhash算法实现去重</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-17 20:57:28" itemprop="dateCreated datePublished" datetime="2015-07-17T20:57:28+08:00">2015-07-17</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/网络/" itemprop="url" rel="index"><span itemprop="name">网络</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/网络/爬虫/" itemprop="url" rel="index"><span itemprop="name">爬虫</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>网络爬虫在爬完网页后需要计算网页之间的相似度以进行排序等步骤，如何快速计算文本之间的相似度呢？</p>
<ol>
<li>最Brute-force的方法是逐字比较字符是否相同，然后统计结果</li>
<li>更好一点的办法可以计算文本间的编辑距离，这是一个很好的办法，但是在文本很长，数据量很大时，时间和空间复杂度还是非常可观的</li>
<li>对文本进行分词，抽取特征向量（一般使用TF-IDF，Iterm Frequency-Inverse Document Frequency），然后通过两个特征向量之间的余弦夹角来衡量两个文本的相似度，这种算法几何意义明确，计算复杂度也不是很高，是一种非常好的算法</li>
<li>如果需要处理海量数据，就需要采用一些降维技术，本文中的Simhash算法就适合于计算海量文本相似度的场景</li>
</ol>
<h1 id="Simhash介绍"><a href="#Simhash介绍" class="headerlink" title="Simhash介绍"></a>Simhash介绍</h1><p>Simhash是一种局部敏感的哈希算法（locality sensitive hash，LSH），采用了降维技术，将高维的特征向量降低到固定个bit位中。使用Simhash算法计算文本相似度的流程如下：</p>
<ol>
<li>将一个 f 维的向量 V 初始化为0；f 位的二进制数 S 初始化为0；</li>
<li>对每一个特征：用传统的 hash 算法对该特征产生一个 f 位的签名 b。</li>
<li>对 i=1 到 f：如果 b 的第 i 位为1，则 V 的第 i 个元素加上该特征的权重；否则，V 的第 i 个元素减去该特征的权重。</li>
<li>如果 V 的第 i 个元素大于0，则 S 的第 i 位为1，否则为0；</li>
<li>输出 S 作为签名。</li>
</ol>
<p>这个算法相当于随机产生了f个n维超平面，每个超平面将向量v所在的空间一分为二，v在这个超平面上方则得到一个1，否则得到一个0，然后将得到的f个0或1组合起来成为一个f维的签名。如果两个向量u, v的夹角为θ，则一个随机超平面将它们分开的概率为θ/π，因此u, v的签名的对应位不同的概率等于θ/π。所以，我们可以用两个向量的签名的不同的对应位的数量，即汉明距离，来衡量这两个向量的差异程度。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://tech.uc.cn/?p=1086" target="_blank" rel="noopener">利用Simhash快速查找相似文档</a></p>
<p>  <a href="http://www.cnblogs.com/colorfulkoala/archive/2012/07/29/2614382.html" target="_blank" rel="noopener">Simhash原理</a></p>

          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/17/Trapping-Rain-Water/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/17/Trapping-Rain-Water/" class="post-title-link" itemprop="url">Trapping Rain Water </a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-17 15:34:59" itemprop="dateCreated datePublished" datetime="2015-07-17T15:34:59+08:00">2015-07-17</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/数组/" itemprop="url" rel="index"><span itemprop="name">数组</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>Trapping Rain Water<br><a href="https://leetcode.com/problems/trapping-rain-water/" target="_blank" rel="noopener">https://leetcode.com/problems/trapping-rain-water/</a></p>
<h1 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h1><blockquote>
<p>记录当前Bar左边和右边的最大高度，取两个最大高度的最小值min，当前Bar对总结果的贡献为min-当前Bar的高度，将每个Bar对结果的贡献累加起来即可。该算法时间复杂度2N，空间复杂度O(N)。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(height == <span class="keyword">null</span> || height.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>, rightMax = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span>[] right = <span class="keyword">new</span> <span class="keyword">int</span>[height.length];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = height.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        right[i] = rightMax;</span><br><span class="line">        rightMax = Math.max(rightMax, height[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> leftMax = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; height.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> water = Math.min(right[i], leftMax) - height[i];</span><br><span class="line">        <span class="keyword">if</span>(water &gt; <span class="number">0</span>)</span><br><span class="line">            sum += water;</span><br><span class="line">        leftMax = Math.max(leftMax, height[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Two-Pointers"><a href="#Two-Pointers" class="headerlink" title="Two Pointers"></a>Two Pointers</h1><blockquote>
<p>使用两个指针l和r，初始时l指向第一个Bar，r指向最后一个Bar。然后每次从l和r指向的Bar选出高度最小的。如果l-Bar较小，那么统计l-Bar右面比l-Bar高度小的Bar与l-Bar的差值，直到右面的高度值超过l-Bar。r-Bar类似向左统计。两个指针相遇结果就统计完成。该算法时间复杂度N，空间复杂度O（1）。另一个巧妙使用多指针思想的题目：<a href="http://jeffzzf.github.io/2015/07/01/Sort-colors/">http://jeffzzf.github.io/2015/07/01/Sort-colors/</a></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(height == <span class="keyword">null</span> || height.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = height.length - <span class="number">1</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">int</span> min = Math.min(height[l], height[r]);</span><br><span class="line">        <span class="keyword">if</span>(min == height[l]) &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; min &gt; height[++l])</span><br><span class="line">                sum += min - height[l];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; min &gt; height[--r])</span><br><span class="line">                sum += min - height[r];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>类似于Trapping rain water，不过不是找出最大的容器而是计算所有边容纳的水量。采用类似的思路，维护首尾两个指针以及从两端开始的最大高度，每次从容器高度小得一端收缩，计算与维护的最大高度相比的差值，累加后的值即为总的水量。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(height == <span class="keyword">null</span> || height.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> n = height.length;</span><br><span class="line">    <span class="keyword">int</span> maxLeft = <span class="number">0</span>, maxRight = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>, right = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">if</span>(height[left] &lt; height[right]) &#123;</span><br><span class="line">            maxLeft = Math.max(maxLeft, height[left]);</span><br><span class="line">            result += maxLeft - height[left];</span><br><span class="line">            ++left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            maxRight = Math.max(maxRight, height[right]);</span><br><span class="line">            result += maxRight - height[right];</span><br><span class="line">            --right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/16/Java读取txt文件乱码的解决/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/16/Java读取txt文件乱码的解决/" class="post-title-link" itemprop="url">Java读取txt文件乱码的解决</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-16 18:59:25" itemprop="dateCreated datePublished" datetime="2015-07-16T18:59:25+08:00">2015-07-16</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Basic/" itemprop="url" rel="index"><span itemprop="name">Basic</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>在Mac下读取Windows下生成的txt文件时总是出现乱码，试了好多种办法都不奏效，几欲崩溃。在编码问题上已经栽了好多次跟头了，之前搞PHP+MySql时也被编码问题整得焦头烂额。</p>
<p>好在最终还是找到了解决办法，思路如下。</p>
<h1 id="Windows平台编码"><a href="#Windows平台编码" class="headerlink" title="Windows平台编码"></a>Windows平台编码</h1><p>Windows平台的默认编码是ANSI，所谓ANSIAmerican National Standards Institute，ANSI）就是就是用2个字节来表示一个字符的方法，ANSI编码使用0X80-0xFF（ASCII使用00000000-11111110）七位来表示128个字符。</p>
<p>不同的国家和地区制定了不同的标准，由此产生了 GB2312、GBK、GB18030、Big5、Shift_JIS 等各自的编码标准。这些使用多个字节来代表一个字符的各种汉字延伸编码方式，称为 ANSI 编码。在简体中文Windows操作系统中，ANSI 编码代表 GBK 编码；在繁体中文Windows操作系统中，ANSI编码代表Big5；在日文Windows操作系统中，ANSI 编码代表 Shift_JIS 编码。</p>
<h1 id="MAC平台编码"><a href="#MAC平台编码" class="headerlink" title="MAC平台编码"></a>MAC平台编码</h1><p>MAC平台使用的是Unique编码方案，而JVM的默认编码依赖于平台，所以一开始使用<code>BufferedReader reader = new BufferedReader(new FileReader(&quot;file.txt&quot;))</code>时，使用的是Mac平台默认的解码器。这点可以在JDK文档中找到：</p>
<blockquote>
<p>Every instance of the Java virtual machine has a default charset, which may or may not be one of the standard charsets. The default charset is determined during virtual-machine startup and typically depends upon the locale and charset being used by the underlying operating system.</p>
</blockquote>
<p>同时，通过追踪BufferedReader，终于在StreamDecoder类中发现<br><code>if(var2 == null) {
            var3 = Charset.defaultCharset().name();
        }</code><br>而<code>System.out.print(Charset.defaultCharset().name());</code>妥妥地输出<code>UTF-8</code></p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p><code>BufferedReader reader = new BufferedReader(new InputStreamReader
        (new FileInputStream(“file.txt”), &quot;gbk&quot;));</code><br>其中的gbk一般可以换成gb2312或者gb18030，三者只有很小的差别，版本顺序为gb2312-&gt;gbk-&gt;gb18030。另外，<code>new FileReader(&quot;file.txt&quot;)</code>是对<code>new InputStreamReader(new FileInputStream(“file.txt”))</code>的简单封装。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol>
<li>Mac 的应用环境（二）语言、输入法和字体：<a href="http://www.jianshu.com/p/507e88f3b519" target="_blank" rel="noopener">http://www.jianshu.com/p/507e88f3b519</a></li>
<li>ANSI编码：<a href="http://baike.baidu.com/link?url=7lfY09Rt6chkepLWRZzGcg61YJJd93tR5C3tqt8WzOyhaTZe3Z-4m7QjyMY9x9smjCSzOCtqbJl-sgoP2p-8bU9AMjSVE9ZL7VHLxq8AMcu" target="_blank" rel="noopener">http://baike.baidu.com/link?url=7lfY09Rt6chkepLWRZzGcg61YJJd93tR5C3tqt8WzOyhaTZe3Z-4m7QjyMY9x9smjCSzOCtqbJl-sgoP2p-8bU9AMjSVE9ZL7VHLxq8AMcu</a></li>
<li>Class Charset:<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html" target="_blank" rel="noopener">http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html</a></li>
<li>中文编码杂谈:<a href="http://www.searchtb.com/2012/04/chinese_encode.html" target="_blank" rel="noopener">http://www.searchtb.com/2012/04/chinese_encode.html</a></li>
</ol>

          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jeffzzf.github.io/2015/07/13/Dungeon-Game-Triangle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeffzzf">
      <meta itemprop="description" content="Do one thing at a time, and do well.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Noob">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/13/Dungeon-Game-Triangle/" class="post-title-link" itemprop="url">Dungeon Game && Triangle</a>
              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-13 10:52:28" itemprop="dateCreated datePublished" datetime="2015-07-13T10:52:28+08:00">2015-07-13</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-28 20:23:34" itemprop="dateModified" datetime="2019-08-28T20:23:34+08:00">2019-08-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/DP/" itemprop="url" rel="index"><span itemprop="name">DP</span></a></span>

                
                
              
            </span>
          

          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Dungeon-Game"><a href="#Dungeon-Game" class="headerlink" title="Dungeon Game"></a>Dungeon Game</h1><p>题目大意：公主被困在迷宫的右下角，骑士初始位于迷宫的左上角。迷宫的每个单元格（包括左上角和右下角）都有一个整数值x，如果x &lt; 0，骑士到达该单元格时掉|x|的血；如果x &gt; 0骑士在该单元格加|x|的血；如果 x == 0，骑士的血不掉也不加。如果骑士的血为0，那么他马上死亡。</p>
<p>要使骑士活着见到公主，那么骑士出发时最少需要加多少血。<br><a href="https://leetcode.com/submissions/detail/32832133/" target="_blank" rel="noopener">https://leetcode.com/submissions/detail/32832133/</a></p>
<blockquote>
<p>如果按照常规思维，从左上角到右下角的计算顺序，需要保存到某个单元格时最少需要的血以及剩下的血。如果逆向思维一下，从右下角向左上角计算，如果单元格需要更多的血，就加上需要的血；否则减去当前需要的血值。这种思维方式可以简化解题思路。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateMinimumHP</span><span class="params">(<span class="keyword">int</span>[][] d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(d == <span class="keyword">null</span> || d.length == <span class="number">0</span> || d[<span class="number">0</span>].length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[d.length][d[<span class="number">0</span>].length];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = d.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = d[<span class="number">0</span>].length - <span class="number">1</span>; j &gt;= <span class="number">0</span>; --j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == d.length - <span class="number">1</span> &amp;&amp; j == d[<span class="number">0</span>].length -<span class="number">1</span>)</span><br><span class="line">                dp[i][j] = Math.max(<span class="number">1</span>, <span class="number">1</span> - d[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i == d.length - <span class="number">1</span>)</span><br><span class="line">                dp[i][j] = Math.max(<span class="number">1</span>, dp[i][j + <span class="number">1</span>] - d[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j == d[<span class="number">0</span>].length - <span class="number">1</span>)</span><br><span class="line">                dp[i][j] = Math.max(<span class="number">1</span>, dp[i + <span class="number">1</span>][j] - d[i][j]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i][j] = Math.max(<span class="number">1</span>, Math.min(dp[i][j + <span class="number">1</span>], dp[i + <span class="number">1</span>][j]) - d[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Triangle"><a href="#Triangle" class="headerlink" title="Triangle"></a>Triangle</h1><p>Given a triangle, find the minimum path sum from top to bottom. Each step you may move to adjacent numbers on the row below.</p>
<p><a href="https://leetcode.com/problems/triangle/" target="_blank" rel="noopener">https://leetcode.com/problems/triangle/</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; tri)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tri == <span class="keyword">null</span> || tri.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> len = tri.get(tri.size() - <span class="number">1</span>).size();</span><br><span class="line">    <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        List&lt;Integer&gt; list = tri.get(i);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; list.size(); ++j)</span><br><span class="line">            dp[j] = list.get(j) + Math.min(dp[j], dp[j + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
    </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jeffzzf</p>
  <div class="site-description motion-element" itemprop="description">Do one thing at a time, and do well.</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">121</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">107</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeffzzf</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  <script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>

  
  <script src="/js/schemes/muse.js?v=7.3.0"></script>


  

  <script src="/js/next-boot.js?v=7.3.0"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

  

  

  


  





  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  
































</body>
</html>
